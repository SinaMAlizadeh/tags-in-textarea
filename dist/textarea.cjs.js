"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react");function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e);function a(e){var t=e.tag,a=e.addToDiv;return n.default.createElement("button",{type:"button",className:"tags-button",onClick:function(){return a(t)}},t.label)}!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var a=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&a.firstChild?a.insertBefore(r,a.firstChild):a.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}(".chatBox{border:1px solid gray;height:300px;line-height:30px;padding:3px}.tags-list-button{display:flex;gap:10px;margin:10px 0}.tags-button{padding:.375rem .75rem}.tag,.tags-button{background-color:transparent;background-color:#0b5ed7;border:1px solid #0a58ca;border-radius:.25rem;color:#212529;color:#fff;cursor:pointer;display:inline-block;font-size:1rem;font-weight:400;line-height:1.5;text-align:center;text-decoration:none;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;-webkit-user-select:none;-moz-user-select:none;user-select:none;vertical-align:middle}.tag{border-radius:.2rem;font-size:.875rem;padding:.25rem .5rem}.tag button{background-color:transparent;border:0;color:#fff;cursor:pointer}");var r=function(e,t){var n=e||"",a=document.createElement("div");return a.innerHTML=n,t.forEach((function(e){Array.from(a.getElementsByClassName("inserted-tag")).forEach((function(t){var n,a,r=t.querySelector("span");if(r&&(null===(n=r.textContent)||void 0===n?void 0:n.replace("x",""))===e.label){var o=document.createTextNode(e.value);null===(a=t.parentNode)||void 0===a||a.replaceChild(o,t)}}))})),a.innerHTML.replace(/<\/?[^>]+(>|$)/g,"").replace(/&nbsp;/g," ")};function o(t){var n=t.defaultValue,a=t.tags,o=t.setValue,l=e.useRef(null),i=function(){var e;o(r((null===(e=null==l?void 0:l.current)||void 0===e?void 0:e.innerHTML)||"",a))},d=function(e){e&&e.parentNode&&(e.parentNode.removeChild(e),i())};return e.useEffect((function(){var e=l.current;return e&&(e.innerHTML=n,e.addEventListener("input",i)),function(){e&&e.removeEventListener("input",i)}}),[n]),{chatBoxRef:l,addToDiv:function(e){var t=document.createElement("span");t.innerText=e.label;var n=document.createElement("button");n.innerText="x",n.onclick=function(){return d(t.parentElement)},t.appendChild(n),function(e){var t,n;null===(t=l.current)||void 0===t||t.focus();var a=window.getSelection();if(a){var r=a.getRangeAt(0);r.deleteContents();var o=document.createElement("span");o.className="tag",o.appendChild(e),o.setAttribute("contenteditable","false"),o.classList.add("inserted-tag"),r.insertNode(o),r.collapse(!1),a.removeAllRanges(),a.addRange(r)}null===(n=l.current)||void 0===n||n.focus()}(t),i()}}}exports.Textarea=function(e){var t=e.dir,r=void 0===t?"ltr":t,l=e.tags,i=e.defaultValue,d=o({defaultValue:void 0===i?"":i,tags:l,setValue:e.setValue}),u=d.addToDiv,c=d.chatBoxRef;return n.default.createElement(n.default.Fragment,null,n.default.createElement("div",{className:"textarea-content",dir:r},n.default.createElement("div",{className:"tags-list-button"},l.map((function(e,t){return n.default.createElement(a,{addToDiv:u,tag:e,key:t})}))),n.default.createElement("div",{id:"chatBox",ref:c,contentEditable:!0,className:"chatBox"})))};
//# sourceMappingURL=textarea.cjs.js.map
